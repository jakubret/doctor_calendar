<h1 style="text-align: center;">Doctor's Weekly Calendar</h1>

<div class="week-navigation" style="text-align: center; margin-bottom: 20px;">
  <button (click)="navigateWeeks(-1)" style="padding: 8px 16px; margin-right: 10px;">Previous Week</button>
  <h2 style="display: inline-block; margin: 0;">{{ viewDate | date: 'MMMM yyyy' }}</h2>
  <button (click)="navigateWeeks(1)" style="padding: 8px 16px; margin-left: 10px;">Next Week</button>
</div>

<table class="calendar-table" style="width: 100%; border-collapse: collapse;">
  <thead>
    <tr>
      <th style="border: 1px solid #ddd; padding: 8px; text-align: center;">Time</th>
      <th *ngFor="let day of weeklySlots" style="border: 1px solid #ddd; padding: 8px; text-align: center;">
        {{ day.date | date: 'EEE, MMM d' }}
      </th>
    </tr>
  </thead>
  <tbody>
    <tr *ngFor="let timeSlot of getTimeSlots()">
      <td style="border: 1px solid #ddd; padding: 8px; text-align: center;">
        {{ timeSlot | date: 'h:mm a' }}
      </td>
      <td *ngFor="let day of weeklySlots" style="border: 1px solid #ddd; padding: 8px; text-align: center;">
        <ng-container *ngIf="getSlot(day, timeSlot)">
          <span *ngIf="getSlot(day, timeSlot).booked" style="color: white; background-color: red; padding: 4px 8px; border-radius: 4px;">
            Booked ({{ getSlot(day, timeSlot)?.patientName || 'Anonymous' }})
          </span>
          <button
  *ngIf="!getSlot(day, timeSlot).booked && role === 'patient'"
  (click)="openBookingForm(getSlot(day, timeSlot))"
  style="background-color: lightgreen; border: none; padding: 4px 8px; cursor: pointer;"
>
  Available
</button>

        </ng-container>
      </td>
    </tr>
  </tbody>
</table>

<div *ngIf="selectedSlot">
  <app-booking
    [slot]="selectedSlot"
    (confirm)="confirmBooking($event)"
    (cancel)="cancelBooking()"
  ></app-booking>
</div>




<div *ngIf="selectedSlot">
  <p>Selected Slot: {{ selectedSlot.time }}</p>
  <app-booking
    [slot]="selectedSlot"
    (confirm)="confirmBooking($event)"
    (cancel)="cancelBooking()"
  ></app-booking>
</div>

<form (ngSubmit)="submitAvailability()" *ngIf="role === 'doctor'" style="margin-top: 20px;">
  <div style="display: flex; gap: 10px; justify-content: center;">
    <label for="startDate">Start Date:</label>
    <input id="startDate" type="date" [(ngModel)]="availabilityForm.startDate" name="startDate" required />

    <label for="endDate">End Date:</label>
    <input id="endDate" type="date" [(ngModel)]="availabilityForm.endDate" name="endDate" required />

    <label for="startTime">Start Time:</label>
    <input id="startTime" type="time" [(ngModel)]="availabilityForm.startTime" name="startTime" required />

    <label for="endTime">End Time:</label>
    <input id="endTime" type="time" [(ngModel)]="availabilityForm.endTime" name="endTime" required />

    <button
      type="submit"
      style="background-color: blue; color: white; padding: 5px 10px; border: none; cursor: pointer;"
    >
      Submit
    </button>
  </div>
</form>
<!-- Other Calendar Code -->


